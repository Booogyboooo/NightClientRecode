package io.booogyboooo.nightclient.modules.exploit;

import io.booogyboooo.nightclient.event.EventData;
import io.booogyboooo.nightclient.event.EventType;
import io.booogyboooo.nightclient.event.annotation.Event;
import io.booogyboooo.nightclient.module.NightModule;
import io.booogyboooo.nightclient.module.Type;
import io.booogyboooo.nightclient.util.DelayUtil;
import net.minecraft.entity.player.PlayerInventory;

public class AntiDurability extends NightModule {

	private int originalSlot = -1;
	
	public AntiDurability() {
		super(Type.EXPLOIT, "AntiDurability", "Default");
	}
	
	@Override
	public void onEnable() {
		this.registerEvent(this, "onLeftClick");
	}
	
	@Override
	public void onDisable() {
		this.unregisterEvent(this, "onLeftClick");
	}
	
	@Event(eventType = EventType.LEFT_CLICK)
	public void onLeftClick(EventData data) {
		System.out.println("ran");
        PlayerInventory inventory = mc.player.getInventory();
        
        for (int i = 0; i < 9; i++) {
            if (inventory.getStack(i).isEmpty()) {
                originalSlot = inventory.getSelectedSlot();
                inventory.setSelectedSlot(i);
                i = 9;
            }
        }
        
        DelayUtil.timeout(() -> {
        	if (originalSlot != -1) {
        		inventory.setSelectedSlot(originalSlot);
        		originalSlot = -1;
        	}
        }, 51);
	}

}